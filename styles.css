
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Whitney', 'Helvetica Neue', Helvetica, Arial, sans-serif;
    background-color: #36393f;
    color: #dcddde;
    display: flex;
    height: 100vh;
    overflow: hidden;
}

/* Server List Styles */
.server-list {
    width: 72px;
    background-color: #202225; /* Darker background for server list */
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 12px 0;
    gap: 8px;
    overflow-y: auto;
}

.server-icon {
    width: 48px;
    height: 48px;
    background-color: #36393f; /* Dark grey for inactive server icons */
    border-radius: 50%; /* Always circular by default */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #dcddde; /* Light grey text */
    position: relative;
    overflow: hidden;
    font-size: 18px;
    font-weight: 600;
    flex-shrink: 0;
}

/* Indicator bar for active/hovered server icons (excluding home) */
.server-icon:not(.home)::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 0; /* Hidden by default */
    height: 8px; /* Smallest height for indicator */
    background-color: white;
    border-radius: 0 4px 4px 0;
    transition: width 0.2s ease, height 0.2s ease;
}

.server-icon:not(.home):hover::before {
    width: 8px; /* Visible on hover */
    height: 20px; /* Taller on hover */
}

.server-icon:not(.home).active::before {
    width: 8px; /* Visible when active */
    height: 40px; /* Full height when active */
}

/* Hover state for non-home server icons */
.server-icon:not(.home):hover {
    background-color: #5865f2; /* Discord purple on hover */
    border-radius: 15px; /* Pill shape on hover */
    color: #ffffff;
}

/* Active state for non-home server icons */
.server-icon:not(.home).active {
    background-color: #5865f2; /* Discord purple when active */
    border-radius: 15px; /* Pill shape when active */
    color: white;
}

/* Specific styling for the Home/Friends button */
.server-icon.home {
    background-color: #5865f2; /* Always purple for friends home */
    color: white;
    border-radius: 50%; /* Always circular */
    /* No ::before indicator for home button */
}

.server-icon.home:hover {
    background-color: #4752c4; /* Darker purple on hover */
    border-radius: 50%; /* Keep circular */
}
/* Ensure active state also just has the blue background and is circular */
.server-icon.home.active {
    background-color: #5865f2; /* Keep purple when active */
    color: white;
    border-radius: 50%;
}

.server-separator {
    width: 32px;
    height: 2px;
    background-color: #36393f;
    border-radius: 1px;
}

/* Channel List Styles */
.channel-list {
    width: 240px;
    background-color: #2f3136; /* Slightly lighter grey than server list */
    display: flex;
    flex-direction: column;
}

.server-header {
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px;
    border-bottom: 1px solid #202225;
    cursor: pointer;
    transition: background-color 0.2s;
    font-weight: 600;
    color: #ffffff; /* Ensure server name is white */
}

.server-header:hover {
    background-color: #34373c;
}

.server-name {
    font-size: 16px;
    color: #ffffff;
}

.server-dropdown {
    font-size: 18px;
    color: #b9bbbe;
}

.channels-view {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.channels-container {
    flex: 1;
    overflow-y: auto;
    padding: 8px;
}

.channel-category {
    margin-bottom: 16px;
}

.category-header {
    display: flex;
    align-items: center;
    padding: 8px 8px 4px 8px;
    cursor: pointer;
    user-select: none;
    color: #8e9297; /* Category header text color */
}

.category-header svg {
    margin-right: 4px;
    color: #8e9297;
}

.category-header span {
    font-size: 12px;
    font-weight: 600;
    color: #8e9297;
    letter-spacing: 0.5px;
    text-transform: uppercase; /* Ensure consistent with Discord UI */
}

.icon-btn-small { /* Re-styled for consistency with Discord's subtle icon buttons */
    background: none;
    border: none;
    color: #8e9297;
    cursor: pointer;
    font-size: 16px;
    font-weight: bold;
    padding: 4px;
    border-radius: 4px; /* Slight rounding for icon buttons */
    transition: color 0.2s, background-color 0.2s;
}

.icon-btn-small:hover {
    color: #dcddde;
    background-color: #3c3f45;
}


.channel {
    display: flex;
    align-items: center;
    padding: 6px 8px;
    margin: 2px 0;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.15s, color 0.15s;
    color: #8e9297; /* Default channel text color */
}

.channel:hover {
    background-color: #3c3f45; /* Darker hover background */
    color: #dcddde; /* Lighter text on hover */
}

.channel.active {
    background-color: #40444b; /* Active channel background */
    color: #ffffff; /* White text for active channel */
}

.channel svg {
    margin-right: 8px;
    flex-shrink: 0;
    color: #8e9297; /* Default channel icon color */
}
.channel.active svg {
    color: #ffffff; /* White icon for active channel */
}


.channel span {
    font-size: 16px;
    font-weight: 500;
}

/* User Panel Styles */
.user-panel {
    height: 52px;
    background-color: #292b2f; /* Darker grey for user panel */
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 8px;
}

.user-info {
    display: flex;
    align-items: center;
    gap: 8px;
}

.user-controls {
    display: flex;
    gap: 8px;
}

.user-controls .control-btn { /* Reverted to circular, Discord-like icons */
    width: 28px;
    height: 28px;
    background: none;
    border: none;
    border-radius: 50%; /* Circular buttons */
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    color: #b9bbbe; /* Light grey for icons */
    transition: background-color 0.15s, color 0.15s;
    flex-shrink: 0;
}

.user-controls .control-btn:hover {
    background-color: #3c3f45; /* Darker hover */
    color: #dcddde;
}

.user-controls .control-btn.active { /* Muted/Deafened active state */
    color: #ed4245; /* Red for active (muted) */
}


/* Main Content Styles */
.main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    background-color: #36393f; /* Main chat/friends background */
}

.chat-view {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.chat-header {
    height: 48px;
    background-color: #36393f;
    border-bottom: 1px solid #202225;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 16px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.channel-info {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 16px;
    font-weight: 600;
    color: #ffffff;
}

.chat-header-actions {
    display: flex;
    gap: 8px;
}

.icon-btn { /* For groupCallBtn, groupSettingsBtn */
    background: none;
    border: none;
    color: #b9bbbe;
    cursor: pointer;
    padding: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.15s, background-color 0.15s;
    border-radius: 4px;
}

.icon-btn:hover {
    color: #dcddde;
    background-color: #40444b;
}


/* Chat Tabs */
.chat-tabs {
    display: flex;
    padding: 0 16px;
    border-bottom: 1px solid #202225;
    background-color: #36393f;
}

.chat-tab {
    background: none;
    border: none;
    color: #b9bbbe;
    font-size: 14px;
    font-weight: 500;
    padding: 8px 12px;
    cursor: pointer;
    transition: all 0.2s;
    border-bottom: 2px solid transparent;
}

.chat-tab:hover {
    color: #dcddde;
}

.chat-tab.active {
    color: #ffffff;
    border-bottom-color: #5865f2;
}


/* Messages Styles */
.messages {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.message-group {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    position: relative;
    padding: 4px 0; /* Add slight padding for hover effects */
}

.message-group:hover {
    background-color: rgba(0,0,0,0.07); /* Subtle hover background */
}

.message-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    background-color: #5865f2;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 16px;
    color: white;
    flex-shrink: 0;
}
.message-avatar-img {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
}


.message-content {
    flex: 1;
}

.message-header {
    display: flex;
    align-items: baseline;
    gap: 8px;
    margin-bottom: 4px;
}

.message-author {
    font-weight: 600;
    color: #ffffff;
    font-size: 15px;
}

.message-timestamp {
    font-size: 12px;
    color: #72767d;
}

.message-text {
    font-size: 15px;
    line-height: 1.4;
    color: #dcddde;
    word-wrap: break-word;
    white-space: pre-wrap; /* Preserve whitespace and line breaks */
}

.message-file {
    margin-top: 8px;
}

.message-file a {
    color: #5865f2;
    text-decoration: none;
    font-size: 14px;
}

.message-file a:hover {
    text-decoration: underline;
}

.message-reactions {
    display: flex;
    gap: 4px;
    margin-top: 8px;
}

.reaction {
    background-color: #202225;
    border: 1px solid #2f3136;
    border-radius: 12px;
    padding: 4px 8px;
    font-size: 12px;
    color: #dcddde;
    cursor: pointer;
    transition: background-color 0.15s;
    display: flex;
    align-items: center;
    gap: 4px;
}

.reaction:hover {
    background-color: #4f545c;
}

.add-reaction-btn {
    position: absolute;
    top: 4px; /* Align with message group top */
    right: 8px;
    background-color: #2f3136;
    border: 1px solid #4f545c;
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: none; /* Hidden by default */
    align-items: center;
    justify-content: center;
    color: #b9bbbe;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.15s, color 0.15s, border-color 0.15s;
}

.message-group:hover .add-reaction-btn {
    display: flex; /* Show on message group hover */
}

.add-reaction-btn:hover {
    background-color: #4f545c;
    border-color: #dcddde;
    color: #dcddde;
}

/* Message Input Styles */
.message-input-container {
    padding: 0 16px 20px 16px;
    background-color: #36393f;
}

.message-input-wrapper {
    display: flex;
    align-items: center;
    background-color: #40444b;
    border-radius: 8px;
    padding: 8px;
}

.attach-btn, .emoji-btn {
    background: none;
    border: none;
    color: #b9bbbe;
    cursor: pointer;
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: color 0.2s;
}

.attach-btn:hover, .emoji-btn:hover {
    color: #dcddde;
}

#messageInput {
    flex: 1;
    background: none;
    border: none;
    outline: none;
    color: #dcddde;
    font-size: 15px;
    padding: 8px 12px;
    resize: none; /* Prevent manual resize */
    height: 40px; /* Fixed height for single line */
}
#messageInput::placeholder {
    color: #8e9297;
}

/* Emoji Picker Styles */
.emoji-picker {
    position: absolute;
    background-color: #2f3136;
    border-radius: 8px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.5);
    padding: 8px;
    display: grid;
    grid-template-columns: repeat(8, 1fr); /* 8 columns of emojis */
    gap: 4px;
    z-index: 1000;
}

.emoji-option {
    background: none;
    border: none;
    padding: 8px;
    font-size: 20px;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.15s;
}

.emoji-option:hover {
    background-color: #4f545c;
}


/* Friends View Styles */
.friends-main-view {
    flex: 1;
    display: flex;
    flex-direction: column;
    background-color: #36393f;
}

.friends-header {
    height: 48px;
    border-bottom: 1px solid #202225;
    display: flex;
    align-items: center;
    padding: 0 16px;
    background-color: #36393f;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.friends-tabs {
    display: flex;
    gap: 8px;
}

.friends-tab {
    background: none;
    border: none;
    color: #8e9297;
    font-size: 14px;
    font-weight: 500;
    padding: 6px 10px;
    border-radius: 3px;
    cursor: pointer;
    transition: all 0.2s;
}

.friends-tab:hover {
    background-color: #40444b;
    color: #dcddde;
}

.friends-tab.active {
    background-color: #5865f2;
    color: white;
}

.friends-content-wrapper {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
}

.friends-list {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.friends-empty {
    color: #72767d;
    text-align: center;
    padding: 20px;
    font-size: 16px;
}

.friend-item {
    display: flex;
    align-items: center;
    background-color: #36393f;
    padding: 10px 16px;
    border-radius: 4px;
    transition: background-color 0.15s;
    box-shadow: 0 1px 2px rgba(0,0,0,0.1);
}

.friend-item:hover {
    background-color: #3c3f45;
}

.friend-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    margin-left: 10px; /* Adjusted to accommodate `friend-avatar-img` having its own margin */
}

.friend-avatar { /* Default for initials */
    width: 32px;
    height: 32px;
    border-radius: 50%;
    background-color: #5865f2;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 14px;
    color: white;
    flex-shrink: 0;
    background-size: cover;
    background-position: center;
    margin-right: 0; /* Reset for better control */
}
.friend-avatar-img { /* For image avatars */
    width: 32px;
    height: 32px;
    border-radius: 50%;
    object-fit: cover;
    flex-shrink: 0;
    margin-right: 0; /* Reset for better control */
}
/* Ensure consistent spacing */
.friend-item > .friend-avatar, .friend-item > .friend-avatar-img {
    margin-right: 12px;
}


.friend-name {
    font-size: 16px;
    font-weight: 600;
    color: #ffffff;
}

.friend-status {
    font-size: 12px;
    color: #b9bbbe;
}
.friend-status.offline {
    color: #72767d;
}

.friend-actions {
    display: flex;
    gap: 8px;
    margin-left: auto; /* Push actions to the right */
}

.friend-actions button { /* Base style for friend action buttons */
    width: 28px;
    height: 28px;
    border-radius: 50%; /* Circular */
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease, color 0.2s ease;
    flex-shrink: 0;
    font-size: 16px; /* For the emojis/icons */
}

.friend-actions button.message { /* Specific styling for message button */
    background-color: #5865f2;
    color: white;
}
.friend-actions button.message:hover {
    background-color: #4752c4;
}

.friend-actions button.audio-call,
.friend-actions button.video-call {
    background-color: #4f545c; /* Grey background for calls */
    color: #dcddde;
}
.friend-actions button.audio-call:hover,
.friend-actions button.video-call:hover {
    background-color: #5d6268;
}

.friend-actions button.remove { /* Specific styling for remove button */
    background-color: #ed4245;
    color: white;
}
.friend-actions button.remove:hover {
    background-color: #cc3739;
}

.friend-actions button.accept { /* For pending requests */
    background-color: #3ba55d;
    color: white;
}
.friend-actions button.accept:hover {
    background-color: #318a4d;
}

.friend-actions button.reject { /* For pending requests */
    background-color: #ed4245;
    color: white;
}
.friend-actions button.reject:hover {
    background-color: #cc3739;
}

/* Add Friend Form */
.add-friend-form {
    background-color: #2f3136; /* Match channel list background */
    padding: 20px;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.add-friend-form h3 {
    color: #ffffff;
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 8px;
}

.add-friend-form p {
    color: #b9bbbe;
    font-size: 14px;
    margin-bottom: 16px;
}

.add-friend-input-wrapper {
    display: flex;
    gap: 8px;
}

.add-friend-input-wrapper input {
    flex: 1;
    padding: 10px 12px;
    background-color: #202225;
    border: 1px solid #202225;
    border-radius: 3px;
    color: #dcddde;
    font-size: 14px;
    transition: border-color 0.2s;
}

.add-friend-input-wrapper input:focus {
    outline: none;
    border-color: #5865f2;
}

.add-friend-input-wrapper button { /* Apply btn-primary like styles */
    background-color: #5865f2;
    color: white;
    padding: 10px 20px;
    border-radius: 3px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.2s ease;
}
.add-friend-input-wrapper button:hover {
    background-color: #4752c4;
}

.user-search-item {
    display: flex;
    align-items: center;
    background-color: #36393f;
    padding: 10px 16px;
    border-radius: 4px;
    margin-top: 8px;
    transition: background-color 0.15s;
}

.user-search-item:hover {
    background-color: #3c3f45;
}

.user-search-item .user-info {
    flex: 1;
    margin-left: 12px; /* Consistent spacing with friend-item */
}
.user-search-item .user-name {
    font-size: 16px;
    font-weight: 600;
    color: #ffffff;
}

.add-friend-btn { /* Button to send request in search results */
    background-color: #5865f2;
    color: white;
    padding: 8px 16px;
    border-radius: 3px;
    border: none;
    cursor: pointer;
    font-size: 14px;
    font-weight: 500;
    transition: background-color 0.2s ease;
    margin-left: auto;
}
.add-friend-btn:hover {
    background-color: #4752c4;
}

.error-message, .success-message { /* Shared styles for messages in add friend */
    padding: 10px;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 500;
    text-align: center;
    margin-bottom: 10px;
}
.error-message {
    background-color: #ed4245;
    color: white;
}
.success-message {
    background-color: #3ba55d;
    color: white;
}

/* Call Interface Styles */
.call-interface {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 320px; /* Smaller window by default */
    height: 240px; /* Smaller window by default */
    background-color: #2f3136;
    border-radius: 8px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.5);
    display: flex;
    flex-direction: column;
    overflow: hidden;
    transition: all 0.3s ease;
    z-index: 1000;
}
.call-interface.hidden {
    display: none;
}

.call-interface.fullscreen {
    width: 100vw;
    height: 100vh;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    border-radius: 0;
    transform: none !important; /* Override potential drag transform */
}

.call-header {
    background-color: #202225;
    padding: 8px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    color: #dcddde;
    font-size: 14px;
    font-weight: 600;
    cursor: grab; /* Indicate draggable */
    position: relative;
}

.close-call-btn {
    background: none;
    border: none;
    font-size: 18px;
    color: #b9bbbe;
    cursor: pointer;
    transition: color 0.2s;
    padding: 4px;
    border-radius: 3px;
}
.close-call-btn:hover {
    color: #dcddde;
    background-color: #40444b;
}

.call-participants {
    flex: 1;
    display: grid;
    grid-template-columns: 1fr; /* Default to single column */
    grid-auto-rows: 1fr;
    gap: 8px;
    padding: 8px;
    background-color: #36393f;
    overflow: hidden;
}

.participant {
    position: relative;
    background-color: #202225;
    border-radius: 4px;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: white;
    transition: all 0.2s ease;
}

.participant.speaking {
    box-shadow: 0 0 0 2px #3ba55d; /* Green border for speaking */
}

.participant .zoom-container {
    width: 100%;
    height: 100%;
    position: relative;
    overflow: hidden; /* Hide overflow from zoomed content */
    cursor: grab;
}

.participant video {
    width: 100%;
    height: 100%;
    object-fit: contain; /* Ensure video fits within its container */
    transform-origin: 0 0;
    transition: transform 0.1s ease-out, opacity 0.2s ease; /* Smooth zoom/pan, opacity for video toggle */
    opacity: 1; /* Default to video visible */
}

.participant-name {
    position: absolute;
    bottom: 8px;
    left: 8px;
    background-color: rgba(0,0,0,0.6);
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 14px;
    font-weight: 500;
    color: white;
    z-index: 5;
}

.call-controls-main {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 72px; /* Increased height for better button size */
    background: rgba(0,0,0,0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    padding: 0 20px;
    z-index: 10;
}

.call-control-btn {
    width: 56px;
    height: 56px;
    background-color: #4f545c; /* Grey background */
    border-radius: 50%; /* Circular */
    border: none;
    color: white;
    font-size: 24px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: background-color 0.2s ease;
}

.call-control-btn:hover {
    background-color: #5d6268; /* Darker grey on hover */
}

.call-control-btn.active { /* Muted/Video off */
    background-color: #ed4245; /* Red for off/muted */
}
.call-control-btn.active:hover {
    background-color: #cc3739;
}


/* Modals (Create Group, Edit Group, Profile Settings) */
.modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1002;
}

.modal.hidden {
    display: none;
}

.modal-content {
    background-color: #36393f;
    border-radius: 8px;
    width: 100%;
    max-width: 500px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    overflow: hidden;
}

.modal-header {
    background-color: #2f3136;
    padding: 16px 20px;
    border-bottom: 1px solid #202225;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h2 {
    color: #ffffff;
    font-size: 20px;
    font-weight: 600;
}

.close-modal-btn {
    background: none;
    border: none;
    font-size: 24px;
    color: #b9bbbe;
    cursor: pointer;
    transition: color 0.2s;
}

.close-modal-btn:hover {
    color: #dcddde;
}

.modal-body {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
}

.form-group label {
    display: block;
    font-size: 12px;
    font-weight: 600;
    color: #b9bbbe;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: 8px;
}

.form-group input {
    width: 100%;
    padding: 10px;
    background-color: #202225;
    border: 1px solid #202225;
    border-radius: 3px;
    color: #dcddde;
    font-size: 14px;
    transition: border-color 0.2s;
}

.form-group input:focus {
    outline: none;
    border-color: #5865f2;
}

.friend-selection-list {
    max-height: 200px;
    overflow-y: auto;
    background-color: #202225;
    border-radius: 4px;
    padding: 8px;
    color: #dcddde;
}

.friend-select-item {
    display: flex;
    align-items: center;
    padding: 8px 10px;
    margin-bottom: 4px;
    background-color: #36393f;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.15s;
}
.friend-select-item:last-child {
    margin-bottom: 0;
}

.friend-select-item:hover {
    background-color: #3c3f45;
}

.friend-select-item.selected {
    background-color: #5865f2;
    color: white;
}
.friend-select-item.selected .checkbox {
    background-color: white;
    border-color: white;
}
.friend-select-item.selected .checkbox::after {
    display: block;
}


.checkbox {
    width: 18px;
    height: 18px;
    border: 2px solid #72767d;
    border-radius: 3px;
    margin-right: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    position: relative;
    transition: all 0.15s;
}

.checkbox::after {
    content: '✓';
    font-size: 14px;
    color: #5865f2;
    display: none;
}
/* For checked state of checkbox */
.friend-select-item.selected .checkbox::after {
    display: block;
}


.friend-select-avatar {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: #5865f2;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 10px;
    color: white;
    flex-shrink: 0;
    margin-right: 10px;
}
.friend-select-item img.friend-avatar-img {
    width: 24px;
    height: 24px;
    margin-right: 10px;
}

.modal-footer {
    background-color: #2f3136;
    padding: 16px 20px;
    border-top: 1px solid #202225;
    display: flex;
    justify-content: flex-end;
    gap: 12px;
}

/* Modal Buttons (using specific class names) */
.modal-footer .cancel-btn {
    background: none;
    color: #dcddde;
    padding: 10px 20px;
    border-radius: 3px;
    font-weight: 500;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease, color 0.2s ease;
}
.modal-footer .cancel-btn:hover {
    background-color: #4f545c;
    color: white;
}

.modal-footer .delete-btn {
    background-color: #ed4245;
    color: white;
    padding: 10px 20px;
    border-radius: 3px;
    font-weight: 500;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease;
}
.modal-footer .delete-btn:hover {
    background-color: #cc3739;
}

.modal-footer .create-btn { /* Used for Create Group, Save Profile, Save Group Changes */
    background-color: #5865f2;
    color: white;
    padding: 10px 20px;
    border-radius: 3px;
    font-weight: 500;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease;
}
.modal-footer .create-btn:hover {
    background-color: #4752c4;
}

/* Profile Settings Specifics */
.profile-avatar-upload {
    display: flex;
    justify-content: center;
    margin-bottom: 20px;
}

.avatar-preview-wrapper {
    position: relative;
    width: 96px;
    height: 96px;
    border-radius: 50%;
    cursor: pointer;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #5865f2; /* Fallback for no image */
    transition: all 0.2s ease;
}

.avatar-preview-wrapper:hover .avatar-overlay {
    opacity: 1;
}

.profile-avatar-preview {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
    display: block;
}

.avatar-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.2s ease;
    font-size: 14px;
    font-weight: 500;
}

/* Incoming Call Notification */
.incoming-call {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: #36393f;
    border-radius: 8px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
    padding: 30px;
    text-align: center;
    z-index: 2000;
    width: 100%;
    max-width: 400px;
    display: flex;
    flex-direction: column;
    gap: 20px;
    animation: fadeIn 0.3s ease-out;
}

.incoming-call.hidden {
    display: none;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translate(-50%, -60%); }
    to { opacity: 1; transform: translate(-50%, -50%); }
}

.caller-info {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
}

.caller-avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background-color: #5865f2;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    font-weight: 700;
    color: white;
    background-size: cover;
    background-position: center;
}

.caller-name {
    font-size: 24px;
    font-weight: 700;
    color: #ffffff;
}

.incoming-call p {
    font-size: 16px;
    color: #b9bbbe;
}

.incoming-call-actions {
    display: flex;
    justify-content: center;
    gap: 15px;
}

.incoming-call-actions .call-action-btn {
    padding: 10px 20px;
    border-radius: 3px;
    font-size: 16px;
    font-weight: 600;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s ease;
}

.incoming-call-actions .call-action-btn.accept {
    background-color: #3ba55d;
    color: white;
}
.incoming-call-actions .call-action-btn.accept:hover {
    background-color: #318a4d;
}

.incoming-call-actions .call-action-btn.reject {
    background-color: #ed4245;
    color: white;
}
.incoming-call-actions .call-action-btn.reject:hover {
    background-color: #cc3739;
}

/* Call Quality Indicator */
.call-quality-indicator {
    font-size: 12px;
    color: #ffffff; /* Default white, color changes in JS */
    padding: 4px 8px;
    background-color: rgba(0,0,0,0.6);
    border-radius: 4px;
    position: absolute;
    bottom: 8px; /* Position at bottom of header */
    right: 50%;
    transform: translateX(50%);
    opacity: 0.8;
}

/* Drag and Drop File Upload Indicator */
.message-input-container.drag-over {
    border: 2px dashed #5865f2;
    background-color: rgba(88, 101, 242, 0.1);
}

/* Group DM styling */
.group-avatar {
    width: 32px;
    height: 32px;
    border-radius: 4px; /* Square for groups */
    background-color: #5865f2;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 14px;
    color: white;
    flex-shrink: 0;
    margin-right: 8px; /* Consistent spacing */
}
.group-avatar-img {
    width: 32px;
    height: 32px;
    border-radius: 4px; /* Square for groups */
    object-fit: cover;
    flex-shrink: 0;
    margin-right: 8px; /* Consistent spacing */
}
.group-chat-avatar {
    width: 24px;
    height: 24px;
    border-radius: 4px; /* Square for groups */
    background-color: #5865f2;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 12px;
    color: white;
    flex-shrink: 0;
    margin-right: 8px; /* Consistent spacing */
}
.group-chat-avatar-img {
    width: 24px;
    height: 24px;
    border-radius: 4px; /* Square for groups */
    object-fit: cover;
    flex-shrink: 0;
    margin-right: 8px; /* Consistent spacing */
}


/* Friend selection list checkboxes */
.friend-selection-list {
    max-height: 200px;
    overflow-y: auto;
    background-color: #202225;
    border-radius: 4px;
    padding: 8px;
    color: #dcddde;
}

.friend-select-item {
    display: flex;
    align-items: center;
    padding: 8px 10px;
    margin-bottom: 4px;
    background-color: #36393f;
    border-radius: 4px;
    cursor: pointer;
    transition: background-color 0.15s;
}
.friend-select-item:last-child {
    margin-bottom: 0;
}

.friend-select-item:hover {
    background-color: #3c3f45;
}

.friend-select-item.selected {
    background-color: #5865f2;
    color: white;
}
.friend-select-item.selected .checkbox {
    background-color: white;
    border-color: white;
}
.friend-select-item.selected .checkbox::after {
    display: block;
}


.checkbox {
    width: 18px;
    height: 18px;
    border: 2px solid #72767d;
    border-radius: 3px;
    margin-right: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    position: relative;
    transition: all 0.15s;
}

.checkbox::after {
    content: '✓';
    font-size: 14px;
    color: #5865f2;
    display: none;
}
/* For checked state of checkbox */
.friend-select-item.selected .checkbox::after {
    display: block;
}

.friend-select-avatar {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: #5865f2;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 600;
    font-size: 10px;
    color: white;
    flex-shrink: 0;
    margin-right: 10px;
}
.friend-select-item img.friend-avatar-img {
    width: 24px;
    height: 24px;
    margin-right: 10px;
}